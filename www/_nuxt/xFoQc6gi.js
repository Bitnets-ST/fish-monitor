import{_ as f,c as u,a as e,h as v,d as h,f as x,q as p,i as w,F as y,r as b,t as o,n,j as m,P as k,k as _,o as i,l as P,s as L,e as C}from"./6eDVTdRD.js";const S={name:"StatisticsPage",data(){return{filters:{zone:"all",period:"month",metric:"temperature"},currentChartView:"time",selectedPond:null,ponds:[{id:1,zoneId:1,name:"Alao Oeste",count:145,oxygen:"Normal",oxygenLabel:"Normal",current:"Suave",currentLabel:"Suave",temperature:18.5,status:"normal",waterLevel:85,lightLevel:75,biomass:230,pelletWaste:15,flowStatus:"green"},{id:2,zoneId:1,name:"Estanque Puerto Varas",count:165,oxygen:"Normal",oxygenLabel:"Normal",current:"Suave",currentLabel:"Suave",temperature:17.8,status:"normal",waterLevel:80,lightLevel:70,biomass:210,pelletWaste:18,flowStatus:"green"},{id:3,zoneId:1,name:"Estanque Ensenada",count:130,oxygen:"Alto",oxygenLabel:"Alto",current:"Media",currentLabel:"Media",temperature:19,status:"normal",waterLevel:88,lightLevel:65,biomass:195,pelletWaste:20,flowStatus:"green"},{id:4,zoneId:2,name:"Bahía 2",count:230,oxygen:"Alto",oxygenLabel:"Alto",current:"Media",currentLabel:"Media",temperature:19.2,status:"normal",waterLevel:92,lightLevel:68,biomass:410,pelletWaste:28,flowStatus:"green"},{id:5,zoneId:2,name:"Arrecife Central",count:205,oxygen:"Normal",oxygenLabel:"Normal",current:"Media",currentLabel:"Media",temperature:20,status:"warning",waterLevel:65,lightLevel:60,biomass:375,pelletWaste:35,flowStatus:"yellow"},{id:6,zoneId:2,name:"Marina Centro",count:190,oxygen:"Normal",oxygenLabel:"Normal",current:"Suave",currentLabel:"Suave",temperature:19.5,status:"normal",waterLevel:75,lightLevel:70,biomass:350,pelletWaste:25,flowStatus:"green"},{id:7,zoneId:3,name:"Talofa Sur",count:78,oxygen:"Bajo",oxygenLabel:"Bajo",current:"Fuerte",currentLabel:"Fuerte",temperature:20.1,status:"warning",waterLevel:60,lightLevel:45,biomass:130,pelletWaste:45,flowStatus:"yellow"},{id:8,zoneId:3,name:"Butan 7",count:185,oxygen:"Normal",oxygenLabel:"Normal",current:"Suave",currentLabel:"Suave",temperature:17.8,status:"normal",waterLevel:78,lightLevel:82,biomass:320,pelletWaste:22,flowStatus:"green"},{id:9,zoneId:3,name:"Punta Austral",count:45,oxygen:"Bajo",oxygenLabel:"Bajo",current:"Fuerte",currentLabel:"Fuerte",temperature:21,status:"danger",waterLevel:45,lightLevel:30,biomass:85,pelletWaste:60,flowStatus:"red"}],chartViews:[{label:"Por tiempo",value:"time"},{label:"Por estanque",value:"pond"}]}},computed:{filteredPonds(){let s=[...this.ponds];return this.filters.zone!=="all"&&(s=s.filter(t=>t.zoneId===parseInt(this.filters.zone))),s},summaryMetrics(){const s=this.filteredPonds.length,t=this.getAvgValue("temperature");this.getAvgValue("biomass");const d=this.filteredPonds.filter(g=>g.status==="normal").length;return[{name:"Estanques",value:s,trend:0,type:"ponds"},{name:"Temperatura promedio",value:`${t.toFixed(1)}°C`,trend:2.5,type:"temperature"},{name:"Biomasa total",value:`${this.getTotalValue("biomass")} kg`,trend:5.2,type:"biomass"},{name:"Salud general",value:`${Math.round(d/s*100)}%`,trend:-1.8,type:"health"}]},chartTitle(){return`Evolución de ${this.getMetricLabel(this.filters.metric)} - ${this.getPeriodLabel(this.filters.period)}`}},mounted(){this.checkPondParam()},methods:{applyFilters(){var t;(t=_().$notifications)==null||t.showSuccess("Filtros aplicados correctamente")},selectPond(s){this.selectedPond=s},viewPondDetails(s){this.selectedPond=s},getZoneName(s){return s===1?"Zona Norte":s===2?"Zona Central":"Zona Sur"},getStatusLabel(s){return s==="danger"?"Crítico":s==="warning"?"Alerta":"Normal"},getStatusClass(s){return s==="danger"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":s==="warning"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300":"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300"},getOxygenTextClass(s){return s==="Alto"?"text-green-600 dark:text-green-400":s==="Normal"?"text-blue-600 dark:text-blue-400":s==="Bajo"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"},getOxygenBarClass(s){return s==="Alto"?"bg-green-500":s==="Normal"?"bg-blue-500":s==="Bajo"?"bg-red-500":"bg-gray-500"},getOxygenPercentage(s){return s==="Alto"?"90%":s==="Normal"?"70%":s==="Bajo"?"30%":"50%"},getTempPercentage(s){return Math.min(100,Math.max(0,(s-15)/15*100))},getMetricLabel(s){return{temperature:"Temperatura",oxygen:"Nivel de oxígeno",biomass:"Biomasa",pellet:"Desperdicio de pellet",water:"Nivel de agua"}[s]||s},getPeriodLabel(s){return{day:"Último día",week:"Última semana",month:"Último mes",year:"Último año"}[s]||s},getMetricIcon(s){return"div"},getMetricIconClass(s){return`${{ponds:"text-blue-500",temperature:"text-yellow-500",biomass:"text-purple-500",health:"text-green-500"}[s]||"text-gray-500"}`},getAvgValue(s){return this.filteredPonds.length===0?0:this.filteredPonds.reduce((d,g)=>d+g[s],0)/this.filteredPonds.length},getTotalValue(s){return this.filteredPonds.reduce((t,d)=>t+d[s],0)},checkPondParam(){const s=(this._.provides[k]||this.$route).query.pond;if(s){const t=parseInt(s,10),d=this.ponds.find(g=>g.id===t);d&&(this.selectedPond=d)}},goBack(){this.$router.push("/")}}},M={class:"min-h-screen bg-gray-100 dark:bg-gray-900 py-6 px-4 sm:px-6 lg:px-8"},N={class:"max-w-7xl mx-auto"},B={class:"flex justify-between items-center mb-6"},z={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6"},V={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},j={class:"flex items-end"},A={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},I={class:"flex items-start justify-between"},T={class:"text-sm text-gray-500 dark:text-gray-400"},W={class:"text-2xl font-semibold text-gray-800 dark:text-white"},Z={class:"mt-2"},E={class:"flex items-center"},F={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6"},O={class:"flex justify-between items-center mb-4"},q={class:"text-lg font-medium text-gray-800 dark:text-white"},D={class:"flex space-x-2"},H=["onClick"],U={class:"h-64 bg-gray-50 dark:bg-gray-700 rounded-lg flex items-center justify-center"},G={class:"text-center text-gray-500 dark:text-gray-400"},R={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden"},J={class:"overflow-x-auto"},K={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Q={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},X=["onClick"],Y={class:"px-6 py-4 whitespace-nowrap"},$={class:"text-sm font-medium text-gray-900 dark:text-white"},ee={class:"px-6 py-4 whitespace-nowrap"},te={class:"text-sm text-gray-500 dark:text-gray-400"},se={class:"px-6 py-4 whitespace-nowrap"},re={class:"text-sm text-gray-900 dark:text-white"},le={class:"px-6 py-4 whitespace-nowrap"},ae={class:"px-6 py-4 whitespace-nowrap"},oe={class:"text-sm text-gray-900 dark:text-white"},ne={class:"px-6 py-4 whitespace-nowrap"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ie=["onClick"],ue={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 dark:bg-gray-900 dark:bg-opacity-80 flex items-center justify-center z-50"},ge={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4"},ce={class:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"},me={class:"text-lg font-medium text-gray-800 dark:text-white"},xe={class:"p-4"},pe={class:"grid grid-cols-2 gap-4 mb-4"},ye={class:"font-medium text-gray-900 dark:text-white"},be={class:"space-y-4"},fe={class:"flex justify-between mb-1"},ve={class:"text-sm font-medium text-blue-600"},he={class:"w-full bg-gray-200 rounded-full h-2"},we={class:"flex justify-between mb-1"},ke={class:"w-full bg-gray-200 rounded-full h-2"},_e={class:"flex justify-between mb-1"},Pe={class:"text-sm font-medium text-blue-600"},Le={class:"w-full bg-gray-200 rounded-full h-2"},Ce={class:"flex justify-between mb-1"},Se={class:"w-full bg-gray-200 rounded-full h-2"},Me={class:"mt-6 flex justify-end"};function Ne(s,t,d,g,l,a){return i(),u("div",M,[e("div",N,[e("div",B,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"},"Estadísticas de Estanques"),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Análisis detallado del rendimiento y métricas clave")],-1)),e("button",{onClick:t[0]||(t[0]=(...r)=>a.goBack&&a.goBack(...r)),class:"flex items-center text-sm bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-md"},t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1),h(" Volver al Dashboard ")]))]),e("div",z,[e("div",V,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Zona",-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>l.filters.zone=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},t[9]||(t[9]=[e("option",{value:"all"},"Todas las zonas",-1),e("option",{value:"1"},"Zona Norte",-1),e("option",{value:"2"},"Zona Central",-1),e("option",{value:"3"},"Zona Sur",-1)]),512),[[p,l.filters.zone]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Periodo",-1)),x(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>l.filters.period=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},t[11]||(t[11]=[e("option",{value:"day"},"Último día",-1),e("option",{value:"week"},"Última semana",-1),e("option",{value:"month"},"Último mes",-1),e("option",{value:"year"},"Último año",-1)]),512),[[p,l.filters.period]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Métrica",-1)),x(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>l.filters.metric=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},t[13]||(t[13]=[w('<option value="temperature">Temperatura</option><option value="oxygen">Oxígeno</option><option value="biomass">Biomasa</option><option value="pellet">Desperdicio de pellet</option><option value="water">Nivel de agua</option>',5)]),512),[[p,l.filters.metric]])]),e("div",j,[e("button",{onClick:t[4]||(t[4]=(...r)=>a.applyFilters&&a.applyFilters(...r)),class:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}," Aplicar filtros ")])])]),e("div",A,[(i(!0),u(y,null,b(a.summaryMetrics,(r,c)=>(i(),u("div",{key:c,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4"},[e("div",I,[e("div",null,[e("p",T,o(r.name),1),e("p",W,o(r.value),1)]),e("div",{class:n(a.getMetricIconClass(r.type))},[(i(),P(L(a.getMetricIcon(r.type)),{class:"h-8 w-8"}))],2)]),e("div",Z,[e("div",E,[e("span",{class:n([r.trend>0?"text-green-500":"text-red-500","text-sm font-medium"])},o(r.trend>0?"+":"")+o(r.trend)+"% ",3),t[15]||(t[15]=e("span",{class:"ml-1 text-xs text-gray-500 dark:text-gray-400"},"vs. periodo anterior",-1))])])]))),128))]),e("div",F,[e("div",O,[e("h2",q,o(a.chartTitle),1),e("div",D,[(i(!0),u(y,null,b(l.chartViews,(r,c)=>(i(),u("button",{key:c,onClick:Be=>l.currentChartView=r.value,class:n(["px-3 py-1 text-sm rounded-md",l.currentChartView===r.value?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"])},o(r.label),11,H))),128))])]),e("div",U,[e("div",G,[t[16]||(t[16]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})],-1)),e("p",null,"Gráfico de "+o(a.getMetricLabel(l.filters.metric))+" por "+o(l.currentChartView==="time"?"tiempo":"estanque"),1)])])]),e("div",R,[t[18]||(t[18]=e("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-medium text-gray-800 dark:text-white"},"Detalles por estanque")],-1)),e("div",J,[e("table",K,[t[17]||(t[17]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Estanque"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Zona"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Temperatura"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Oxígeno"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Biomasa"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Estado"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Acciones")])],-1)),e("tbody",Q,[(i(!0),u(y,null,b(a.filteredPonds,r=>(i(),u("tr",{key:r.id,onClick:c=>a.selectPond(r),class:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"},[e("td",Y,[e("div",$,o(r.name),1)]),e("td",ee,[e("div",te,o(a.getZoneName(r.zoneId)),1)]),e("td",se,[e("div",re,o(r.temperature)+"°C",1)]),e("td",le,[e("div",{class:n(["text-sm",a.getOxygenTextClass(r.oxygen)])},o(r.oxygenLabel),3)]),e("td",ae,[e("div",oe,o(r.biomass)+" kg",1)]),e("td",ne,[e("span",{class:n(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",a.getStatusClass(r.status)])},o(a.getStatusLabel(r.status)),3)]),e("td",de,[e("button",{onClick:C(c=>a.viewPondDetails(r),["stop"]),class:"text-blue-600 hover:text-blue-900 dark:hover:text-blue-400"},"Ver detalles",8,ie)])],8,X))),128))])])])]),l.selectedPond?(i(),u("div",ue,[e("div",ge,[e("div",ce,[e("h3",me,o(l.selectedPond.name),1),e("button",{onClick:t[5]||(t[5]=r=>l.selectedPond=null),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},t[19]||(t[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",xe,[e("div",pe,[e("div",null,[t[20]||(t[20]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Zona",-1)),e("p",ye,o(a.getZoneName(l.selectedPond.zoneId)),1)]),e("div",null,[t[21]||(t[21]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Estado",-1)),e("span",{class:n(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",a.getStatusClass(l.selectedPond.status)])},o(a.getStatusLabel(l.selectedPond.status)),3)])]),e("div",be,[e("div",null,[e("div",fe,[t[22]||(t[22]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Temperatura",-1)),e("div",ve,o(l.selectedPond.temperature)+"°C",1)]),e("div",he,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:m(`width: ${a.getTempPercentage(l.selectedPond.temperature)}%`)},null,4)])]),e("div",null,[e("div",we,[t[23]||(t[23]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Oxígeno",-1)),e("div",{class:n(["text-sm font-medium",a.getOxygenTextClass(l.selectedPond.oxygen)])},o(l.selectedPond.oxygenLabel),3)]),e("div",ke,[e("div",{class:n(["h-2 rounded-full",a.getOxygenBarClass(l.selectedPond.oxygen)]),style:m(`width: ${a.getOxygenPercentage(l.selectedPond.oxygen)}`)},null,6)])]),e("div",null,[e("div",_e,[t[24]||(t[24]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Nivel de agua",-1)),e("div",Pe,o(l.selectedPond.waterLevel)+"%",1)]),e("div",Le,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:m(`width: ${l.selectedPond.waterLevel}%`)},null,4)])]),e("div",null,[e("div",Ce,[t[25]||(t[25]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Desperdicio pellet",-1)),e("div",{class:n(["text-sm font-medium",l.selectedPond.pelletWaste>40?"text-red-600":"text-green-600"])},o(l.selectedPond.pelletWaste)+"% ",3)]),e("div",Se,[e("div",{class:n(["h-2 rounded-full",l.selectedPond.pelletWaste>40?"bg-red-500":"bg-green-500"]),style:m(`width: ${l.selectedPond.pelletWaste}%`)},null,6)])])]),e("div",Me,[e("button",{onClick:t[6]||(t[6]=r=>l.selectedPond=null),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}," Cerrar ")])])])])):v("",!0)])])}const Ve=f(S,[["render",Ne]]);export{Ve as default};
